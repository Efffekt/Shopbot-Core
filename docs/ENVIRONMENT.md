# Environment Variables

All environment variables are documented in `.env.example`. Copy it to `.env.local` for local development.

## Required

| Variable | Description | Where to get it |
|----------|-------------|-----------------|
| `NEXT_PUBLIC_SUPABASE_URL` | Supabase project URL | Supabase Dashboard > Settings > API |
| `NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY` | Supabase anon/public key | Supabase Dashboard > Settings > API |
| `SUPABASE_SERVICE_ROLE_KEY` | Supabase service role key (server-side only) | Supabase Dashboard > Settings > API |
| `ADMIN_USERNAME` | Username for admin panel Basic Auth | You choose |
| `ADMIN_PASSWORD` | Password for admin panel Basic Auth | You choose (use a strong password) |
| `GOOGLE_CLOUD_PROJECT` | Google Cloud project ID for Vertex AI | Google Cloud Console |
| `GOOGLE_SERVICE_ACCOUNT_KEY` | Full JSON service account key | Google Cloud Console > IAM > Service Accounts > Keys |
| `OPENAI_API_KEY` | OpenAI API key (for embeddings + fallback LLM) | [platform.openai.com](https://platform.openai.com/api-keys) |
| `FIRECRAWL_API_KEY` | Firecrawl API key for web scraping | [firecrawl.dev](https://firecrawl.dev) |

## Email (Resend)

| Variable | Description | Where to get it |
|----------|-------------|-----------------|
| `RESEND_API_KEY` | Resend API key | [resend.com](https://resend.com) dashboard |
| `RESEND_FROM_EMAIL` | Verified sender email address | Must be verified in Resend (default: `noreply@preik.ai`) |

## Rate Limiting (Upstash Redis)

| Variable | Description | Where to get it |
|----------|-------------|-----------------|
| `UPSTASH_REDIS_REST_URL` | Upstash Redis REST endpoint | [console.upstash.com](https://console.upstash.com) > Your database > REST API |
| `UPSTASH_REDIS_REST_TOKEN` | Upstash Redis REST token | Same page as above |

Without these, the rate limiter falls back to in-memory (fine for dev, not suitable for production).

## Vercel Cron

| Variable | Description | Where to get it |
|----------|-------------|-----------------|
| `CRON_SECRET` | Secret for authenticating cron requests | Auto-generated by Vercel when you deploy with `vercel.json` cron config |

## Optional

| Variable | Description | Default |
|----------|-------------|---------|
| `LOG_LEVEL` | Minimum log level: `debug`, `info`, `warn`, `error` | `info` in production, `debug` in development |

## Google Vertex AI Setup

1. Create a Google Cloud project
2. Enable the **Vertex AI API**
3. Create a service account with the **Vertex AI User** role
4. Generate a JSON key for the service account
5. Paste the entire JSON key as the `GOOGLE_SERVICE_ACCOUNT_KEY` value (single line, no newlines)

## Upstash Redis Setup

1. Create a free database at [console.upstash.com](https://console.upstash.com)
2. Select a region close to your Vercel deployment (e.g., `eu-west-1` for European users)
3. Copy the REST URL and token from the database details page
4. If using Vercel, you can use the Upstash integration to auto-inject these env vars
